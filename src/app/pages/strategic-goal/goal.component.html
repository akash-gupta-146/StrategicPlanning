<h3>Strategic Goals</h3>
<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default" *ngFor="let g of objectives; let i = index;">
    <div class="panel-heading" role="tab" id="headingOne">
      <b class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne{{i}}" aria-expanded="true" aria-controls="collapseOne">
          {{g.objective}}
        </a>
      </b>
    </div>
    <div id="collapseOne{{i}}" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
      <div class="panel-body">
        <div class="row">
          <div class="row" *ngFor="let spi of g.spis; let j = index;">
            <div class="col-lg-12">
              <div class="card">
                <span class="card-title"><i class="material-icons">label_outline</i><b>Strategic Performance indicator</b><i class="material-icons right">close</i></span>
                <p style="    padding: 0 2rem !important;">{{spi.spi}}</p>
                <b>CurrentLevel : </b>{{spi.currentLevel}}
                <table>
                  <thead>
                    <tr>
                      <th>Target Digital</th>
                    </tr>
                  </thead>
                  <thead>
                    <tr>
                      <th *ngFor="let y of spi.targetDigital">{{y.year}}</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td *ngFor="let td of spi.targetDigital;">{{td.level}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <a class="waves-effect waves-light btn" style="float: right;right: 25px;" [routerLink]="['/goal-initiative',g.id]">Add Initiative</a>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
    <form [formGroup]="goalForm" >
      <div class="row">
          <b>New Goal</b>
      </div>
      <div class="col-lg-12 col-sm-12">
        <label class="control-label">Enter Objective</label>
        <textarea class="form-control" rows="3" formControlName="objective"></textarea>
      </div>
      <div class="col-lg-12 col-sm-12">
        <label class="control-label">Total Estimated Cost</label>
        <input type="number" class="form-control" placeholder="20000" formControlName="totalCost">
      </div>
      <div formArrayName="spis">
        <div class="row" *ngFor="let s of goalForm.controls.spis.controls;let i = index;" [formGroupName]="i">
          <b>Strategic Performance indicator</b>
          <div class="col-lg-12 col-sm-12">
            <label class="control-label">Enter Spi</label>
            <textarea class="form-control" rows="3" formControlName="spi"></textarea>
          </div>
          <div class="col-lg-12 col-sm-12">
            <label class="control-label">Select Measure</label>
            <select class="form-control" formControlName="measureUnit">
              <option value="" disabled selected>Choose Measurement Unit</option>
              <option value="Percent">Percent</option>
              <option value="Decimal">Decimal</option>
            </select>  
          </div>
          <div class="col-lg-12 col-sm-12">
            <label class="active" >Enter Current Level</label>
            <input type="text" class="form-control" formControlName="currentLevel">                  
          </div>
          <div class="col-lg-12 col-sm-12" formArrayName="targetDigital">
            <label class="control-label">Target Digital</label>
            <div class="col-lg-6 col-sm-12" *ngFor="let td of goalForm.controls.spis.controls[i].controls.targetDigital.controls;let m = index;" [formGroupName]="m">
              <div class="row">
                <div class="col-lg-4 col-sm-6">{{td.value.year}}</div>
                <div class="col-lg-4 col-sm-6"><input type="text" class="validate" formControlName="level"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <button type="button" class="btn" (click)="addSpi()">Add SPI</button>
      <button class="btn" type="button" (click)="onSubmit()">Submit</button>
    </form>
  </div>
</div>